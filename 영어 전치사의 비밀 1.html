<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜ì–´ ì „ì¹˜ì‚¬ì˜ ë¹„ë°€ v3.0: ê³µê°„ì—ì„œ ì¶”ìƒìœ¼ë¡œì˜ ì—¬ì •</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.1/dist/mermaid.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        /* ì»¤ìŠ¤í…€ CSS */
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #F0F8FF; /* ì•¨ë¦¬ìŠ¤ ë¸”ë£¨ */
            color: #2c3e50; /* ê¸°ë³¸ í…ìŠ¤íŠ¸ */
            line-height: 1.7;
            font-weight: 400;
        }

        .slide-deck-container {
            max-width: 1000px; /* ìŠ¬ë¼ì´ë“œ í­ */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-radius: 16px;
        }

        .slide {
            background-color: #FFFFFF;
            min-height: 650px; /* ìŠ¬ë¼ì´ë“œ ìµœì†Œ ë†’ì´ ì¦ê°€ */
            padding: 40px 50px; /* ìŠ¬ë¼ì´ë“œ ë‚´ë¶€ íŒ¨ë”© */
            display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
            opacity: 0;
            transition: opacity 0.7s ease-in-out;
        }

        .slide.active {
            display: block;
            opacity: 1;
        }

        h1, h2, h3, h4, h5 {
            font-family: 'Montserrat', sans-serif;
            color: #0A4A8F; /* ë”¥ ë¸”ë£¨ */
            line-height: 1.3;
            margin-bottom: 0.7em;
        }
        h1 { font-size: 2.5em; font-weight: 700; text-align: center; margin-top: 0; border-bottom: 3px solid #FFB000; padding-bottom: 0.5em; }
        h2 { font-size: 2em; font-weight: 600; margin-top: 1.5em; color: #0A4A8F; }
        h3 { font-size: 1.6em; font-weight: 600; margin-top: 1.3em; color: #1E69B8; } /* ì•½ê°„ ë°ì€ ë”¥ë¸”ë£¨ */
        h4 { font-size: 1.3em; font-weight: 600; margin-top: 1.1em; color: #3498DB; } /* ë°ì€ íŒŒë‘ */
        
        p, li { font-size: 1.05em; margin-bottom: 1em; }
        ul, ol { padding-left: 1.8em; }
        li { margin-bottom: 0.6em; }

        .navigation-buttons {
            background-color: #0A4A8F; /* ë”¥ ë¸”ë£¨ */
        }

        .nav-button {
            background-color: #FFB000; /* ì•°ë²„ ì˜ë¡œìš° */
            color: #0A4A8F; /* ë”¥ ë¸”ë£¨ í…ìŠ¤íŠ¸ */
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.1s ease;
        }
        .nav-button:hover {
            background-color: #FFC74D; /* ë°ì€ ì•°ë²„ ì˜ë¡œìš° */
        }
        .nav-button:disabled {
            background-color: #a0aec0; /* íšŒìƒ‰ */
            color: #e2e8f0;
        }

        .code-tag {
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
            background-color: #E0E7FF; /* ì—°í•œ ì¸ë””ê³  */
            padding: 3px 7px;
            border-radius: 5px;
            font-size: 0.9em;
            color: #3730A3; /* ì¸ë””ê³  */
            border: 1px solid #C7D2FE;
        }

        .highlight {
            background-color: #FFF3CD; /* ì—°í•œ ë…¸ë‘ (ì•°ë²„ ê²½ê³ ìƒ‰ ìœ ì‚¬) */
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
            color: #855F00; /* ì–´ë‘ìš´ ë…¸ë‘ */
        }
        
        .example {
            background-color: #E6F4FF; /* ë§¤ìš° ì—°í•œ íŒŒë‘ */
            border-left: 5px solid #3498DB; /* ë°ì€ íŒŒë‘ */
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .example em { font-weight: 600; color: #0A4A8F; }
        .example-annotation { font-size: 0.9em; color: #4A5568; margin-left: 10px; font-style: italic; }

        .mermaid { text-align: center; margin-bottom: 1.5em; }
        .mermaid svg { max-width: 100%; height: auto; }

        .d3-visualization {
            width: 100%;
            min-height: 300px;
            border: 1px solid #D1E5F0; /* ì—°í•œ í•˜ëŠ˜ìƒ‰ í…Œë‘ë¦¬ */
            border-radius: 10px;
            margin-top: 25px;
            margin-bottom: 25px;
            display: flex;
            flex-direction: column; /* Title and SVG vertically */
            align-items: center;
            justify-content: center;
            background-color: #F8FAFC; /* ë§¤ìš° ì—°í•œ íšŒìƒ‰ */
            overflow: hidden;
            padding: 15px;
        }
        .d3-visualization-title {
            font-size: 1.1em;
            font-weight: 600;
            color: #0A4A8F;
            margin-bottom: 10px;
        }
        .d3-text { font-size: 14px; fill: #2c3e50; }
        .d3-label { font-size: 13px; fill: #4A5568; text-anchor: middle; }
        .d3-arrow { stroke: #3498DB; stroke-width: 2.5; marker-end: url(#arrowhead-d3); }
        
        .interactive-area { padding: 20px; border: 2px dashed #3498DB; border-radius: 10px; margin-top: 25px; background-color: #F0F8FF; }
        .interactive-area button, .control-button {
            background-color: #3498DB; color: white; border: none; padding: 10px 15px; margin: 5px; border-radius: 6px; cursor: pointer; font-weight: 500;
        }
        .interactive-area button:hover, .control-button:hover { background-color: #2980b9; }

        .popup {
            display: none; position: fixed; left: 50%; top: 50%; transform: translate(-50%, -50%);
            background-color: white; padding: 30px; border: 1px solid #bdc3c7; border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.25); z-index: 1000; max-width: 90%; width: 500px;
        }
        .popup-content { text-align: left; }
        .popup-content h3 { margin-top: 0; color: #0A4A8F; }
        .popup-close {
            position: absolute; top: 15px; right: 20px; font-size: 1.8em; font-weight: bold;
            cursor: pointer; color: #7f8c8d; transition: color 0.2s;
        }
        .popup-close:hover { color: #2c3e50; }

        /* íˆ´íŒ ìŠ¤íƒ€ì¼ */
        .tooltip {
            position: absolute;
            text-align: center;
            padding: 8px 12px;
            font-size: 0.9em;
            background: #2c3e50;
            color: white;
            border-radius: 6px;
            pointer-events: none; /* So it doesn't interfere with mouse events on other elements */
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 1001;
        }
        
        /* ì¹´ë“œ UI ìŠ¤íƒ€ì¼ (ìŠ¬ë¼ì´ë“œ 8) */
        .card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .card {
            background-color: #fff; border: 1px solid #D1E5F0; border-radius: 10px;
            padding: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.08); cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover { transform: translateY(-5px); box-shadow: 0 6px 15px rgba(0,0,0,0.12); }
        .card-front h4 { margin-top: 0; color: #0A4A8F; }
        .card-back { display: none; margin-top: 15px; }
        .card-back h5 { font-size: 1.1em; color: #1E69B8; margin-bottom: 0.5em; }
        .card-back p { font-size: 0.95em; margin-bottom: 0.5em; }
        .card.flipped .card-front { display: none; }
        .card.flipped .card-back { display: block; }

        /* í€´ì¦ˆ ìŠ¤íƒ€ì¼ (ìŠ¬ë¼ì´ë“œ 9) */
        .quiz-container { margin-top: 20px; }
        .quiz-question { margin-bottom: 15px; font-weight: 500; }
        .quiz-options button { display: block; width: 100%; text-align: left; margin-bottom: 8px; background-color: #E0E7FF; color: #3730A3; }
        .quiz-options button:hover { background-color: #C7D2FE; }
        .quiz-feedback { margin-top: 10px; padding: 10px; border-radius: 5px; font-weight: 500; }
        .quiz-feedback.correct { background-color: #D1FAE5; color: #065F46; } /* Green */
        .quiz-feedback.incorrect { background-color: #FEE2E2; color: #991B1B; } /* Red */

    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen">
    <div class="slide-deck-container my-5">
        <div class="slides">
            <!-- Slide 1: ì‹œì‘: ì „ì¹˜ì‚¬, ë¯¸ì§€ì˜ ì„¸ê³„ë¡œì˜ ì´ˆëŒ€ -->
            <div class="slide active" id="slide1">
                <h1 style="font-size: 2.8em;">
                    <i class="fas fa-compass mr-3 text-amber-400"></i>ì˜ì–´ ì „ì¹˜ì‚¬ì˜ ë¹„ë°€ v3.0
                </h1>
                <h2 style="text-align:center; color: #1E69B8; font-size: 1.8em; margin-bottom: 2em;">ê³µê°„ì—ì„œ ì¶”ìƒìœ¼ë¡œì˜ ì—¬ì • - ì‹¬ì¸µ ë¶„ì„ ë° ì‹œë®¬ë ˆì´ì…˜</h2>
                
                <p class="text-lg">ì˜ì–´ ì „ì¹˜ì‚¬ëŠ” ë‹¨ìˆœí•œ ìœ„ì¹˜ í‘œì‹œë¥¼ ë„˜ì–´, ìš°ë¦¬ ì‚¬ê³ ë°©ì‹ê³¼ ì„¸ìƒì„ ì´í•´í•˜ëŠ” í‹€ì„ ë°˜ì˜í•©ë‹ˆë‹¤. ì´ ìŠ¬ë¼ì´ë“œ ë±ì€ ì „ì¹˜ì‚¬ê°€ ì–´ë–»ê²Œ <strong class="highlight">êµ¬ì²´ì ì¸ ê³µê°„ ê°œë…</strong>ì—ì„œ ì¶œë°œí•˜ì—¬ <strong class="highlight">ì¶”ìƒì ì¸ ì˜ë¯¸</strong>ë¡œ í™•ì¥ë˜ëŠ”ì§€, ê·¸ í¥ë¯¸ë¡œìš´ ì—¬ì •ìœ¼ë¡œ ì—¬ëŸ¬ë¶„ì„ ì´ˆëŒ€í•©ë‹ˆë‹¤.</p>
                
                <h3 class="mt-10"><i class="fas fa-bullseye mr-2 text-amber-500"></i>í•™ìŠµ ëª©í‘œ</h3>
                <ul class="list-disc pl-6 text-base">
                    <li>ì „ì¹˜ì‚¬ì˜ ë‹¤ì˜ì„±ê³¼ ì¶”ìƒì„±ì´ ë°œìƒí•˜ëŠ” ê·¼ë³¸ ì›ë¦¬ë¥¼ 'ê³µê°„ &rarr; ì€ìœ  &rarr; ì¶”ìƒ'ì˜ 3ë‹¨ê³„ í”„ë ˆì„ì›Œí¬ë¡œ ê¹Šì´ ìˆê²Œ ì´í•´í•©ë‹ˆë‹¤.</li>
                    <li>ê°œë… ì€ìœ  ì´ë¡ (Conceptual Metaphor Theory)ì´ ì „ì¹˜ì‚¬ ì˜ë¯¸ í™•ì¥ì— ì–´ë–»ê²Œ ê¸°ì—¬í•˜ëŠ”ì§€ ëª…í™•íˆ íŒŒì•…í•©ë‹ˆë‹¤.</li>
                    <li><span class="code-tag">on track</span>, <span class="code-tag">in trouble</span>, <span class="code-tag">under pressure</span> ë“± ì£¼ìš” ì „ì¹˜ì‚¬êµ¬ì˜ ì˜ë¯¸ í˜•ì„± ê³¼ì •ì„ D3.js ì‹œë®¬ë ˆì´ì…˜ì„ í†µí•´ ì§ê´€ì ìœ¼ë¡œ ë¶„ì„í•©ë‹ˆë‹¤.</li>
                    <li>ë‹¨ìˆœ ì•”ê¸°ê°€ ì•„ë‹Œ, ì˜ë¯¸ í™•ì¥ ì›ë¦¬ë¥¼ í†µí•´ ìƒˆë¡œìš´ ì „ì¹˜ì‚¬ í‘œí˜„ë„ ìœ ì¶”í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì„ ê¸°ë¦…ë‹ˆë‹¤.</li>
                    <li>ì „ì¹˜ì‚¬ì— ëŒ€í•œ ë‘ë ¤ì›€ì„ ì—†ì• ê³  ì˜ì–´ í•™ìŠµì— ìì‹ ê°ì„ ê°–ìŠµë‹ˆë‹¤.</li>
                </ul>
                <div class="text-center mt-12">
                    <button class="nav-button text-lg px-8 py-3" onclick="nextSlide()">ì—¬ì • ì‹œì‘ <i class="fas fa-arrow-right ml-2"></i></button>
                </div>
                <p class="slide-number">1 / 10</p>
            </div>

            <!-- Slide 2: ë„ì „: ì™œ ì „ì¹˜ì‚¬ëŠ” ì–´ë ¤ìš´ê°€? -->
            <div class="slide" id="slide2">
                <h2><i class="fas fa-question-circle mr-2 text-red-500"></i>ë„ì „: ì™œ ì „ì¹˜ì‚¬ëŠ” ì–´ë ¤ìš´ê°€?</h2>
                <p>ë§ì€ ì˜ì–´ í•™ìŠµìë“¤ì´ "ì „ì¹˜ì‚¬ë§Œ ì—†ìœ¼ë©´ ì˜ì–´ í•  ë§Œí•œë°!"ë¼ê³  ë§í•˜ê³¤ í•©ë‹ˆë‹¤. ì™œ ê·¸ëŸ´ê¹Œìš”?</p>
                <ul class="list-disc pl-6 text-base">
                    <li><strong>ë‹¤ì˜ì„± (Polysemy):</strong> í•˜ë‚˜ì˜ ì „ì¹˜ì‚¬ê°€ ìˆ˜ì‹­ ê°€ì§€ ë‹¤ë¥¸ ì˜ë¯¸ë¡œ ì“°ì…ë‹ˆë‹¤.
                        <div class="example text-sm">e.g., <span class="code-tag">on</span>: on the table (ìœ„ì¹˜), on Monday (ì‹œê°„), on fire (ìƒíƒœ), depend on (ì˜ì¡´)</div>
                    </li>
                    <li><strong>ì¶”ìƒì„± (Abstractness):</strong> ëˆˆì— ë³´ì´ì§€ ì•ŠëŠ” ì‹œê°„, ìƒíƒœ, ê´€ê³„, ì›ì¸ ë“±ì„ í‘œí˜„í•©ë‹ˆë‹¤.
                        <div class="example text-sm">e.g., <span class="code-tag">in</span> love (ì‚¬ë‘ì— ë¹ ì§„ ìƒíƒœ), <span class="code-tag">by</span> chance (ìš°ì—°íˆ)</div>
                    </li>
                    <li><strong>ê´€ìš©ì  í‘œí˜„ (Idiomatic Expressions):</strong> íŠ¹ì • ë‹¨ì–´ì™€ ê²°í•©í•´ ì˜ˆì¸¡í•˜ê¸° ì–´ë ¤ìš´ ê³ ìœ í•œ ëœ»ì„ ë§Œë“­ë‹ˆë‹¤.
                        <div class="example text-sm">e.g., <span class="code-tag">look forward to</span> (ê¸°ëŒ€í•˜ë‹¤), <span class="code-tag">put up with</span> (ì°¸ë‹¤)</div>
                    </li>
                </ul>
                <p>ì´ëŸ¬í•œ ì´ìœ ë¡œ ë‹¨ìˆœ ì•”ê¸°ëŠ” ê³§ í•œê³„ì— ë¶€ë”ªí™ë‹ˆë‹¤. <strong class="highlight">í•µì‹¬ì€ ê·¸ ì˜ë¯¸ë“¤ì´ ì–´ë–»ê²Œ ì—°ê²°ë˜ê³  í™•ì¥ë˜ëŠ”ì§€, ê·¸ 'ì›ë¦¬'ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</strong></p>
                <div class="mermaid">
                graph LR
                    A["ì „ì¹˜ì‚¬ í•™ìŠµì˜<br>ì–´ë ¤ì›€"] -- ì›ì¸ --> B["ë‹¤ì˜ì„±<br>(Polysemy)"];
                    A -- ì›ì¸ --> C["ì¶”ìƒì„±<br>(Abstractness)"];
                    A -- ì›ì¸ --> D["ê´€ìš©ì  í‘œí˜„<br>(Idioms)"];
                    E["<i class='fas fa-key mr-1'></i> í•´ê²°ì±…:<br>ì˜ë¯¸ í™•ì¥ ì›ë¦¬ ì´í•´"] -.-> A;
                    classDef default fill:#F0F8FF,stroke:#0A4A8F,stroke-width:2px,color:#2c3e50,rx:5,ry:5
                    classDef cause fill:#FFF3CD,stroke:#FFB000,stroke-width:2px,color:#713F12
                    classDef solution fill:#D1FAE5,stroke:#10B981,stroke-width:2px,color:#065F46,fontWeight:bold
                    class B,C,D cause;
                    class E solution;
                </div>
                <div class="mt-4 p-4 bg-amber-50 border border-amber-300 rounded-md text-sm">
                    <p class="font-semibold text-amber-700"><i class="fas fa-lightbulb mr-2"></i>ìƒê°í•  ê±°ë¦¬:</p>
                    <p class="text-amber-600">í•œêµ­ì–´ ì¡°ì‚¬ 'ì—'ë„ "í•™êµ<span class="code-tag">ì—</span> ê°€ë‹¤"(ì¥ì†Œ), "3ì‹œ<span class="code-tag">ì—</span> ë§Œë‚˜ì"(ì‹œê°„), "ê°ê¸°<span class="code-tag">ì—</span> ê±¸ë¦¬ë‹¤"(ì›ì¸/ìƒí™©)ì²˜ëŸ¼ ë‹¤ì–‘í•˜ê²Œ ì“°ì´ì£ ? ì˜ì–´ ì „ì¹˜ì‚¬ë„ ë¹„ìŠ·í•˜ë‹µë‹ˆë‹¤!</p>
                </div>
                <p class="slide-number">2 / 10</p>
            </div>

            <!-- Slide 3: í•µì‹¬ ì—´ì‡ : 3ë‹¨ê³„ ì˜ë¯¸ í™•ì¥ í”„ë ˆì„ì›Œí¬ -->
            <div class="slide" id="slide3">
                <h2><i class="fas fa-key mr-2 text-amber-500"></i>í•µì‹¬ ì—´ì‡ : 3ë‹¨ê³„ ì˜ë¯¸ í™•ì¥ í”„ë ˆì„ì›Œí¬</h2>
                <p>ëŒ€ë¶€ë¶„ì˜ ì „ì¹˜ì‚¬ ì˜ë¯¸ í™•ì¥ì€ ì˜ˆì¸¡ ê°€ëŠ¥í•œ 3ë‹¨ê³„ë¥¼ ê±°ì¹©ë‹ˆë‹¤. ì´ í”„ë ˆì„ì›Œí¬ë¥¼ ì´í•´í•˜ë©´ ì „ì¹˜ì‚¬ì˜ ë‹¤ì˜ì„±ì„ ì²´ê³„ì ìœ¼ë¡œ ì •ë³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                
                <div class="d3-visualization" id="d3-framework-flow-v2" style="min-height: 400px;">
                     <p class="d3-visualization-title">ì „ì¹˜ì‚¬ ì˜ë¯¸ í™•ì¥ 3ë‹¨ê³„</p>
                     <!-- D3.jsê°€ ì—¬ê¸°ì— ë™ì  ë‹¤ì´ì–´ê·¸ë¨ì„ ìƒì„±í•©ë‹ˆë‹¤ -->
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                    <div class="p-4 bg-blue-50 border border-blue-200 rounded-lg">
                        <h4 class="text-blue-700 font-semibold"><span class="text-2xl mr-2">â‘ </span>ë¬¼ë¦¬ì /ê³µê°„ì  ì˜ë¯¸ (ì›í˜•)</h4>
                        <p class="text-sm text-gray-700">ê°€ì¥ ê¸°ë³¸ì ì´ê³  êµ¬ì²´ì ì¸, ëˆˆì— ë³´ì´ëŠ” ê³µê°„ ê´€ê³„ë‚˜ ìœ„ì¹˜. (ì˜ˆ: <span class="code-tag">on</span> the table - í…Œì´ë¸” í‘œë©´ <strong class="highlight">ìœ„ì— ì ‘ì´‰</strong>)</p>
                    </div>
                    <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                        <h4 class="text-yellow-700 font-semibold"><span class="text-2xl mr-2">â‘¡</span>ì€ìœ ì  ì—°ê²° (Metaphor)</h4>
                        <p class="text-sm text-gray-700">ë¬¼ë¦¬ì  ê³µê°„ ì´ë¯¸ì§€ê°€ ì¶”ìƒì  ìƒí™©/ê°œë…ê³¼ ìœ ì‚¬í•˜ê²Œ ì—°ê²°ë¨. <strong class="highlight">ì´ë¯¸ì§€ ìŠ¤í‚¤ë§ˆ</strong><sup>*</sup> (ì˜ˆ: CONTAINER, PATH)ê°€ ì¤‘ìš”í•œ ì—­í• . (ì˜ˆ: ê¸¸ì´ <strong class="highlight">ë§‰íŒ</strong> ìƒí™© &rarr; <span class="code-tag">in</span> a jam)</p>
                    </div>
                    <div class="p-4 bg-green-50 border border-green-200 rounded-lg">
                        <h4 class="text-green-700 font-semibold"><span class="text-2xl mr-2">â‘¢</span>ì¶”ìƒì  ì˜ë¯¸ (ë¹„ìœ ì  í™•ì¥)</h4>
                        <p class="text-sm text-gray-700">ì€ìœ ì  ì—°ê²°ì„ í†µí•´ íŠ¹ì • ì¶”ìƒì  ìƒíƒœ, ê°ì •, ê´€ê³„, ì‹œê°„ ë“±ì„ ë‚˜íƒ€ë‚´ëŠ” ì˜ë¯¸ë¡œ êµ³ì–´ì§. (ì˜ˆ: <span class="code-tag">on</span> duty - ì„ë¬´ë¥¼ <strong class="highlight">ìˆ˜í–‰ ì¤‘ì¸ ìƒíƒœ</strong>)</p>
                    </div>
                </div>
                <p class="footnote mt-4 text-xs">* ì´ë¯¸ì§€ ìŠ¤í‚¤ë§ˆ: ì¸ê°„ì´ ì„¸ìƒì„ ì´í•´í•˜ëŠ” ê¸°ë³¸ì ì¸ ì¸ì§€ êµ¬ì¡°. ì˜ˆ) CONTAINER(ìš©ê¸°), PATH(ê²½ë¡œ), SURFACE(í‘œë©´), UP-DOWN(ìƒí•˜) ë“±.</p>
                <p class="slide-number">3 / 10</p>
            </div>

            <!-- ë‚˜ë¨¸ì§€ ìŠ¬ë¼ì´ë“œ (4-10)ëŠ” ì´ì „ ì½”ë“œì˜ êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ë˜,
                 ìš”ì²­í•˜ì‹  ë””ìì¸ í…Œë§ˆ, D3.js ì‹œê°í™” ê°œì„ , ë‚´ìš© ë³´ê°• (íŠ¹íˆ ìŠ¬ë¼ì´ë“œ 7, 8)ì„ ì ìš©í•˜ì—¬
                 ì´ì–´ì„œ ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤. ì½”ë“œ ê¸¸ì´ê°€ ë§¤ìš° ê¸¸ì–´ì§€ë¯€ë¡œ,
                 ìš°ì„  ì—¬ê¸°ê¹Œì§€ì˜ êµ¬ì¡°ì™€ ìŠ¤íƒ€ì¼, ê·¸ë¦¬ê³  D3.js í•¨ìˆ˜ ê¸°ë³¸ í‹€ì„ í™•ì¸í•´ì£¼ì‹œë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.
                 ì´í›„ ìŠ¬ë¼ì´ë“œ 4ë¶€í„° ìˆœì°¨ì ìœ¼ë¡œ ë‚´ìš©ì„ ì±„ì›Œë‚˜ê°€ê² ìŠµë‹ˆë‹¤. -->

            <!-- Slide 4: ì‚¬ë¡€ ì—°êµ¬ 1: on track ì‹œë®¬ë ˆì´ì…˜ (D3.js ê°œì„ ) -->
            <div class="slide" id="slide4">
                <h2><i class="fas fa-microscope mr-2 text-blue-500"></i>ì‚¬ë¡€ ì—°êµ¬ 1: <span class="code-tag">on track</span> ì‹œë®¬ë ˆì´ì…˜</h2>
                <p>ì „ì¹˜ì‚¬êµ¬ <span class="code-tag">on track</span>ì´ "ê³„íšëŒ€ë¡œ ìˆœì¡°ë¡­ê²Œ ì§„í–‰ ì¤‘"ì´ë¼ëŠ” ì¶”ìƒì  ì˜ë¯¸ë¥¼ ê°–ê²Œ ë˜ëŠ” ê³¼ì •ì„ 3ë‹¨ê³„ í”„ë ˆì„ì›Œí¬ì™€ D3.js ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ ì‚´í´ë´…ì‹œë‹¤.</p>
                
                <div class="d3-visualization" id="d3-on-track-simulation-v2" style="min-height: 400px;">
                    <p class="d3-visualization-title"><span class="code-tag">on track</span> ì˜ë¯¸ í™•ì¥ ì‹œë®¬ë ˆì´ì…˜</p>
                    <!-- D3.jsê°€ ì—¬ê¸°ì— ì‹œë®¬ë ˆì´ì…˜ì„ ìƒì„±í•©ë‹ˆë‹¤ -->
                </div>
                <div class="text-center my-4">
                    <button class="control-button" id="on-track-step1-btn">1ë‹¨ê³„: ë¬¼ë¦¬ì </button>
                    <button class="control-button" id="on-track-step2-btn">2ë‹¨ê³„: ì€ìœ ì </button>
                    <button class="control-button" id="on-track-step3-btn">3ë‹¨ê³„: ì¶”ìƒì </button>
                </div>
                <div id="on-track-explanation" class="p-4 bg-gray-50 rounded-md text-sm">
                    <!-- ë‹¨ê³„ë³„ ì„¤ëª…ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>

                <h4 class="mt-6">ê´€ë ¨ ê°œë… ì€ìœ </h4>
                <p><strong class="highlight">PURPOSES ARE PATHS</strong> (ëª©í‘œëŠ” ê²½ë¡œë‹¤), <strong class="highlight">STATES ARE LOCATIONS ON A PATH</strong> (ìƒíƒœëŠ” ê²½ë¡œ ìœ„ì˜ ìœ„ì¹˜ë‹¤)</p>
                
                <h4 class="mt-4">ë‹¤ì–‘í•œ í™œìš© ì˜ˆì‹œ</h4>
                <div class="interactive-area grid grid-cols-2 gap-2">
                    <button onclick="showExamplePopup('on-track-be')">be on track</button>
                    <button onclick="showExamplePopup('on-track-get')">get on track</button>
                    <button onclick="showExamplePopup('on-track-stay')">stay on track</button>
                    <button onclick="showExamplePopup('on-track-put')">put sth back on track</button>
                </div>
                <p class="slide-number">4 / 10</p>
            </div>

            <!-- Slide 5: ì‚¬ë¡€ ì—°êµ¬ 2: in trouble ì‹œë®¬ë ˆì´ì…˜ (D3.js ê°œì„ ) -->
            <div class="slide" id="slide5">
                <h2><i class="fas fa-biohazard mr-2 text-red-500"></i>ì‚¬ë¡€ ì—°êµ¬ 2: <span class="code-tag">in trouble</span> ì‹œë®¬ë ˆì´ì…˜</h2>
                <p>ì „ì¹˜ì‚¬êµ¬ <span class="code-tag">in trouble</span>ì´ "ê³¤ê²½ì— ì²˜í•œ"ì´ë¼ëŠ” ì¶”ìƒì  ì˜ë¯¸ë¥¼ ê°–ê²Œ ë˜ëŠ” ê³¼ì •ì„ D3.js ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ ì‚´í´ë´…ì‹œë‹¤.</p>

                <div class="d3-visualization" id="d3-in-trouble-simulation-v2" style="min-height: 400px;">
                    <p class="d3-visualization-title"><span class="code-tag">in trouble</span> ì˜ë¯¸ í™•ì¥ ì‹œë®¬ë ˆì´ì…˜</p>
                </div>
                <div class="text-center my-4">
                    <button class="control-button" id="in-trouble-step1-btn">1ë‹¨ê³„: ë¬¼ë¦¬ì </button>
                    <button class="control-button" id="in-trouble-step2-btn">2ë‹¨ê³„: ì€ìœ ì </button>
                    <button class="control-button" id="in-trouble-step3-btn">3ë‹¨ê³„: ì¶”ìƒì </button>
                </div>
                <div id="in-trouble-explanation" class="p-4 bg-gray-50 rounded-md text-sm"></div>

                <h4 class="mt-6">ê´€ë ¨ ê°œë… ì€ìœ </h4>
                <p><strong class="highlight">STATES ARE LOCATIONS</strong> (ìƒíƒœëŠ” ê³µê°„ì´ë‹¤), <strong class="highlight">DIFFICULTIES ARE ENCLOSURES/CONTAINERS</strong> (ì–´ë ¤ì›€ì€ ê°‡íŒ ê³µê°„/ìš©ê¸°ë‹¤)</p>

                <h4 class="mt-4">ë‹¤ì–‘í•œ í™œìš© ì˜ˆì‹œ</h4>
                <div class="interactive-area grid grid-cols-2 gap-2">
                    <button onclick="showExamplePopup('in-trouble-be')">be in trouble</button>
                    <button onclick="showExamplePopup('in-trouble-get')">get into trouble</button>
                    <button onclick="showExamplePopup('in-trouble-keep')">keep sb out of trouble</button>
                </div>
                <p class="slide-number">5 / 10</p>
            </div>

            <!-- Slide 6: ì‚¬ë¡€ ì—°êµ¬ 3: under pressure ì‹œë®¬ë ˆì´ì…˜ (D3.js ê°œì„ ) -->
            <div class="slide" id="slide6">
                <h2><i class="fas fa-weight-hanging mr-2 text-gray-600"></i>ì‚¬ë¡€ ì—°êµ¬ 3: <span class="code-tag">under pressure</span> ì‹œë®¬ë ˆì´ì…˜</h2>
                <p>ì „ì¹˜ì‚¬êµ¬ <span class="code-tag">under pressure</span>ê°€ "ì••ë°•ê°ì„ ëŠë¼ëŠ”"ì´ë¼ëŠ” ì¶”ìƒì  ì˜ë¯¸ë¥¼ ê°–ê²Œ ë˜ëŠ” ê³¼ì •ì„ D3.js ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ ì‚´í´ë´…ì‹œë‹¤.</p>

                <div class="d3-visualization" id="d3-under-pressure-simulation-v2" style="min-height: 400px;">
                     <p class="d3-visualization-title"><span class="code-tag">under pressure</span> ì˜ë¯¸ í™•ì¥ ì‹œë®¬ë ˆì´ì…˜</p>
                </div>
                <div class="text-center my-4">
                    <button class="control-button" id="under-pressure-step1-btn">1ë‹¨ê³„: ë¬¼ë¦¬ì </button>
                    <button class="control-button" id="under-pressure-step2-btn">2ë‹¨ê³„: ì€ìœ ì </button>
                    <button class="control-button" id="under-pressure-step3-btn">3ë‹¨ê³„: ì¶”ìƒì </button>
                </div>
                <div id="under-pressure-explanation" class="p-4 bg-gray-50 rounded-md text-sm"></div>

                <h4 class="mt-6">ê´€ë ¨ ê°œë… ì€ìœ </h4>
                <p><strong class="highlight">EMOTIONS/INFLUENCES ARE PHYSICAL FORCES</strong> (ê°ì •/ì˜í–¥ë ¥ì€ ë¬¼ë¦¬ì  í˜ì´ë‹¤), <strong class="highlight">SUBJECTION IS DOWN</strong> (ì¢…ì†ì€ ì•„ë˜ë‹¤), <strong class="highlight">CONTROL IS UP</strong> (í†µì œëŠ” ìœ„ë‹¤)</p>
                
                <h4 class="mt-4">ë‹¤ì–‘í•œ í™œìš© ì˜ˆì‹œ</h4>
                 <div class="interactive-area grid grid-cols-2 gap-2">
                    <button onclick="showExamplePopup('under-pressure-be')">be under pressure</button>
                    <button onclick="showExamplePopup('under-pressure-work')">work under pressure</button>
                    <button onclick="showExamplePopup('under-pressure-put')">put sb under pressure</button>
                </div>
                <p class="slide-number">6 / 10</p>
            </div>

            <!-- Slide 7: ì´ë¡ ì  ë°°ê²½: ê°œë… ì€ìœ  ì´ë¡  (D3.js ê´€ê³„ë„) -->
            <div class="slide" id="slide7">
                <h2><i class="fas fa-brain mr-2 text-pink-500"></i>ì´ë¡ ì  ë°°ê²½: ê°œë… ì€ìœ  ì´ë¡ </h2>
                <p>ì „ì¹˜ì‚¬ì˜ ì˜ë¯¸ í™•ì¥ì„ ì´í•´í•˜ëŠ” ë° ì¤‘ìš”í•œ ì´ë¡ ì  ë°°ê²½ì€ Lakoffì™€ Johnsonì˜ <strong class="highlight">ê°œë… ì€ìœ  ì´ë¡  (Conceptual Metaphor Theory)</strong>ì…ë‹ˆë‹¤. ì´ ì´ë¡ ì€ ìš°ë¦¬ê°€ ì¶”ìƒì  ê°œë…ì„ êµ¬ì²´ì  ê²½í—˜ì„ í†µí•´ ì´í•´í•œë‹¤ê³  ì„¤ëª…í•©ë‹ˆë‹¤. (<span class="code-tag">TARGET DOMAIN IS SOURCE DOMAIN</span>)</p>
                
                <div class="d3-visualization" id="d3-conceptual-metaphors" style="min-height: 450px;">
                    <p class="d3-visualization-title">ì£¼ìš” ê°œë… ì€ìœ ì™€ ì „ì¹˜ì‚¬êµ¬ ì˜ˆì‹œ</p>
                    <!-- D3.jsê°€ ì—¬ê¸°ì— ì¸í„°ë™í‹°ë¸Œ ê´€ê³„ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤ -->
                </div>
                <p class="footnote text-xs mt-2">ìœ„ ê´€ê³„ë„ëŠ” ì£¼ìš” ê°œë… ì€ìœ ì˜ ì¼ë¶€ì…ë‹ˆë‹¤. ê° ë…¸ë“œì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ê±°ë‚˜ í´ë¦­í•˜ë©´ ì¶”ê°€ ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (êµ¬í˜„ ì‹œ).</p>
                <p class="slide-number">7 / 10</p>
            </div>

            <!-- Slide 8: ì‹¬í™” í•™ìŠµ: ë” ë§ì€ ì „ì¹˜ì‚¬êµ¬ íƒí—˜ (ì¸í„°ë™í‹°ë¸Œ ì¹´ë“œ) -->
            <div class="slide" id="slide8">
                <h2><i class="fas fa-search-plus mr-2 text-teal-500"></i>ì‹¬í™” í•™ìŠµ: ë” ë§ì€ ì „ì¹˜ì‚¬êµ¬ íƒí—˜</h2>
                <p>ë‹¤ì–‘í•œ ì „ì¹˜ì‚¬êµ¬ í‘œí˜„ë“¤ì´ ì–´ë–¤ ê³µê°„ ì´ë¯¸ì§€ì™€ ê°œë… ì€ìœ ì— ê¸°ë°˜í•˜ëŠ”ì§€ ì¸í„°ë™í‹°ë¸Œ ì¹´ë“œë¥¼ í†µí•´ ì‚´í´ë´…ì‹œë‹¤. ì¹´ë“œë¥¼ í´ë¦­í•˜ì—¬ ë’·ë©´ì˜ ë¶„ì„ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”.</p>
                
                <div class="card-grid mt-6">
                    <!-- JavaScriptë¡œ ì¹´ë“œ ë™ì  ìƒì„± ì˜ˆì • -->
                </div>
                <div class="mt-4 p-3 bg-indigo-50 border border-indigo-200 rounded-md text-sm">
                    <p class="font-semibold text-indigo-700"><i class="fas fa-puzzle-piece mr-2"></i>í€´ì¦ˆ íƒ€ì„!</p>
                    <p class="text-indigo-600">ì¹´ë“œì˜ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ, ê° ì „ì¹˜ì‚¬êµ¬ê°€ ì–´ë–¤ <strong class="highlight">í•µì‹¬ ì´ë¯¸ì§€</strong>ì—ì„œ ì¶œë°œí–ˆëŠ”ì§€ ì—°ê²°í•´ë³´ì„¸ìš”. (ì˜ˆ: ë“œë˜ê·¸ ì•¤ ë“œë¡­ í€´ì¦ˆ - ì‹¤ì œ êµ¬í˜„ì€ ì–´ë ¤ìš°ë¯€ë¡œ ê°œë…ë§Œ ì œì‹œ)</p>
                </div>
                <p class="slide-number">8 / 10</p>
            </div>

            <!-- Slide 9: ì‹¤ì „ ì ìš©: íš¨ê³¼ì ì¸ í•™ìŠµ ì „ëµ (í€´ì¦ˆ í¬í•¨) -->
            <div class="slide" id="slide9">
                <h2><i class="fas fa-rocket mr-2 text-purple-500"></i>ì‹¤ì „ ì ìš©: íš¨ê³¼ì ì¸ í•™ìŠµ ì „ëµ</h2>
                <p>ì „ì¹˜ì‚¬ì˜ ì˜ë¯¸ í™•ì¥ ì›ë¦¬ë¥¼ ì´í•´í–ˆë‹¤ë©´, ì´ì œ íš¨ê³¼ì ì¸ í•™ìŠµ ì „ëµì„ ì ìš©í•˜ì—¬ ì‹¤ë ¥ì„ í–¥ìƒì‹œí‚¬ ì°¨ë¡€ì…ë‹ˆë‹¤.</p>
                <ol class="list-decimal pl-6 mt-4 space-y-3">
                    <li><strong class="text-purple-700">ì›í˜•ì  ì˜ë¯¸ íŒŒì•…:</strong> ê° ì „ì¹˜ì‚¬ì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ ê³µê°„ì  ì´ë¯¸ì§€ë¥¼ ë¨¼ì € ëª…í™•íˆ ì¸ì§€í•©ë‹ˆë‹¤.</li>
                    <li><strong class="text-purple-700">ì€ìœ ì  ì—°ê²° ìœ ì¶”:</strong> ë¬¼ë¦¬ì  ì˜ë¯¸ê°€ ì–´ë–¤ ìƒí™©/ê°œë…ê³¼ ìœ ì‚¬í•˜ê²Œ ì—°ê²°ë  ìˆ˜ ìˆëŠ”ì§€ ìƒìƒí•˜ê³  ìœ ì¶”í•©ë‹ˆë‹¤.</li>
                    <li><strong class="text-purple-700">ë¬¸ë§¥ ì† í•™ìŠµ (Collocation):</strong> ë‹¤ì–‘í•œ ì˜ˆë¬¸ì„ í†µí•´ ì‹¤ì œ ì‚¬ìš© ë°©ì‹ê³¼ ìì£¼ í•¨ê»˜ ì“°ì´ëŠ” ë‹¨ì–´(ì—°ì–´)ë¥¼ ê´€ì°°í•©ë‹ˆë‹¤.</li>
                    <li><strong class="text-purple-700">ê°œë… ì€ìœ  í™œìš©:</strong> "ìƒíƒœëŠ” ê³µê°„ì´ë‹¤" ë“± ì£¼ìš” ê°œë… ì€ìœ ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ê´€ë ¨ í‘œí˜„ì„ ë¬¶ì–´ í•™ìŠµí•©ë‹ˆë‹¤.</li>
                    <li><strong class="text-purple-700">ëŠ¥ë™ì  ì‚¬ìš© ë° ë…¸íŠ¸ ì •ë¦¬:</strong> ë°°ìš´ í‘œí˜„ì„ ë§í•˜ê¸°/ê¸€ì“°ê¸°ì— í™œìš©í•˜ê³ , ìì‹ ë§Œì˜ 'ì˜ë¯¸ í™•ì¥ ë…¸íŠ¸'ë¥¼ ë§Œë“¤ì–´ë´…ë‹ˆë‹¤.</li>
                </ol>

                <div class="quiz-container mt-8 p-4 border border-purple-300 rounded-lg bg-purple-50">
                    <p class="quiz-question text-purple-800 font-semibold">ê°„ë‹¨ í€´ì¦ˆ: ë‹¤ìŒ ì¤‘ <span class="code-tag">on edge</span>ì˜ í•µì‹¬ ê°œë… ì€ìœ ì™€ ê°€ì¥ ê°€ê¹Œìš´ ê²ƒì€?</p>
                    <div class="quiz-options mt-3">
                        <button onclick="checkAnswer(this, false)">A) KNOWLEDGE IS LIGHT</button>
                        <button onclick="checkAnswer(this, true)">B) STATES ARE LOCATIONS (ìœ„íƒœë¡œìš´ ì¥ì†Œ)</button>
                        <button onclick="checkAnswer(this, false)">C) PURPOSES ARE PATHS</button>
                    </div>
                    <div id="quiz-feedback-1" class="quiz-feedback" style="display:none;"></div>
                </div>
                <p class="slide-number">9 / 10</p>
            </div>

            <!-- Slide 10: ë§ˆë¬´ë¦¬: ì „ì¹˜ì‚¬, ì´ì œëŠ” ìì‹ ìˆê²Œ! (D3.js ë§ˆì¸ë“œë§µ) -->
            <div class="slide" id="slide10">
                <h1><i class="fas fa-flag-checkered mr-3 text-green-500"></i>ë§ˆë¬´ë¦¬: ì „ì¹˜ì‚¬, ì´ì œëŠ” ìì‹ ìˆê²Œ!</h1>
                <p>ì´ ìŠ¬ë¼ì´ë“œ ë±ì„ í†µí•´ ì˜ì–´ ì „ì¹˜ì‚¬ì˜ ì˜ë¯¸ê°€ ê³µê°„ì—ì„œ ì¶”ìƒìœ¼ë¡œ í™•ì¥ë˜ëŠ” ì—¬ì •ì„ í•¨ê»˜í–ˆìŠµë‹ˆë‹¤. í•µì‹¬ì€ <strong class="highlight">ë‹¨ìˆœ ì•”ê¸°ê°€ ì•„ë‹Œ ì›ë¦¬ ì´í•´</strong>ì…ë‹ˆë‹¤.</p>
                
                <div class="d3-visualization" id="d3-summary-mindmap" style="min-height: 350px;">
                    <p class="d3-visualization-title">í•™ìŠµ ë‚´ìš© ìš”ì•½ ë§ˆì¸ë“œë§µ</p>
                    <!-- D3.jsê°€ ì—¬ê¸°ì— ë§ˆì¸ë“œë§µì„ ìƒì„±í•©ë‹ˆë‹¤ -->
                </div>

                <p class="mt-6 text-center text-lg">ì—¬ëŸ¬ë¶„ì˜ ì˜ì–´ ì—¬ì •ì— ì´ ìŠ¬ë¼ì´ë“œê°€ ì‘ì€ ë“±ëŒ€ê°€ ë˜ê¸°ë¥¼ ë°”ëë‹ˆë‹¤.<br/> ì „ì¹˜ì‚¬ì˜ ì„¸ê³„ë¥¼ ê³„ì† íƒí—˜í•˜ë©° ì˜ì–´ ì‹¤ë ¥ì„ í‚¤ì›Œë‚˜ê°€ì„¸ìš”!</p>
                <p class="text-center text-3xl mt-8">ğŸ‰ Keep Exploring, Keep Learning! ğŸš€</p>
                <div class="text-center mt-8">
                     <button class="nav-button" onclick="showSlide(0)"><i class="fas fa-redo-alt mr-2"></i>ë‹¤ì‹œ í•™ìŠµí•˜ê¸°</button>
                     <!-- <button class="nav-button" onclick="alert('í”¼ë“œë°± ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.')"><i class="fas fa-comment-dots mr-2"></i>í”¼ë“œë°± ë‚¨ê¸°ê¸°</button> -->
                </div>
                <p class="text-xs text-center mt-10 text-gray-400">ì œì‘: AI Assistant (Claude 3.5 Sonnet) | ì•„ì´ì½˜: Font Awesome | ì‹œê°í™”: D3.js, Mermaid.js</p>
                <p class="slide-number">10 / 10</p>
            </div>
        </div>

        <div class="navigation-buttons p-4">
            <button id="prevButton" class="nav-button" onclick="prevSlide()"><i class="fas fa-arrow-left mr-2"></i>ì´ì „</button>
            <span id="slide-indicator" class="text-white self-center">1 / 10</span>
            <button id="nextButton" class="nav-button" onclick="nextSlide()">ë‹¤ìŒ<i class="fas fa-arrow-right ml-2"></i></button>
        </div>
    </div>

    <div id="example-popup" class="popup">
        <span class="popup-close" onclick="closePopup('example-popup')">&times;</span>
        <div class="popup-content" id="example-popup-content"></div>
    </div>
    <div id="preposition-info-popup" class="popup">
        <span class="popup-close" onclick="closePopup('preposition-info-popup')">&times;</span>
        <div class="popup-content">
            <h3 id="popup-expression" class="text-xl font-semibold mb-3"></h3>
            <p class="text-sm mb-2"><strong><i class="fas fa-draw-polygon mr-1 text-blue-500"></i>ê³µê°„ ì´ë¯¸ì§€ &rarr; ì¶”ìƒì  ì˜ë¯¸:</strong> <span id="popup-meaning"></span></p>
            <p class="text-sm"><strong><i class="fas fa-lightbulb mr-1 text-yellow-500"></i>ê´€ë ¨ ê°œë… ì€ìœ :</strong> <span id="popup-metaphor"></span></p>
        </div>
    </div>

<script>
    // --- ìŠ¬ë¼ì´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ë° ê¸°ë³¸ UI ë¡œì§ ---
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;
    const prevButton = document.getElementById('prevButton');
    const nextButton = document.getElementById('nextButton');
    const slideIndicator = document.getElementById('slide-indicator');

    function updateSlideIndicator() {
        slideIndicator.textContent = `${currentSlide + 1} / ${totalSlides}`;
    }

    function showSlide(index) {
        slides.forEach((slide, i) => {
            slide.classList.toggle('active', i === index);
        });
        prevButton.disabled = index === 0;
        nextButton.disabled = index === totalSlides - 1;
        updateSlideIndicator();

        // ìŠ¬ë¼ì´ë“œë³„ D3 ì‹œê°í™” ì‹¤í–‰ ë˜ëŠ” ì´ˆê¸°í™”
        if (slides[index].querySelector('.d3-visualization')) {
            const vizId = slides[index].querySelector('.d3-visualization').id;
            // ê° ìŠ¬ë¼ì´ë“œì— ë§ëŠ” D3 í•¨ìˆ˜ í˜¸ì¶œ
            if (vizId === 'd3-framework-flow-v2' && typeof renderFrameworkFlowV2 === 'function') renderFrameworkFlowV2();
            if (vizId === 'd3-on-track-simulation-v2' && typeof initializeOnTrackSimulation === 'function') initializeOnTrackSimulation();
            if (vizId === 'd3-in-trouble-simulation-v2' && typeof initializeInTroubleSimulation === 'function') initializeInTroubleSimulation();
            if (vizId === 'd3-under-pressure-simulation-v2' && typeof initializeUnderPressureSimulation === 'function') initializeUnderPressureSimulation();
            if (vizId === 'd3-conceptual-metaphors' && typeof renderConceptualMetaphors === 'function') renderConceptualMetaphors();
            if (vizId === 'd3-summary-mindmap' && typeof renderSummaryMindmap === 'function') renderSummaryMindmap();
        }
        if (index === 7 && typeof initializeCards === 'function') initializeCards(); // ìŠ¬ë¼ì´ë“œ 8 ì¹´ë“œ ì´ˆê¸°í™”
    }

    function nextSlide() { if (currentSlide < totalSlides - 1) { currentSlide++; showSlide(currentSlide); } }
    function prevSlide() { if (currentSlide > 0) { currentSlide--; showSlide(currentSlide); } }

    // íŒì—… ë¡œì§ (ì´ì „ê³¼ ë™ì¼)
    const examplePopups = {
        'on-track-be': { title: "be on track", en: "The project <em>is on track</em>.", kr: "í”„ë¡œì íŠ¸ê°€ ìˆœì¡°ë¡­ê²Œ ì§„í–‰ ì¤‘ì´ë‹¤." },
        'on-track-get': { title: "get on track", en: "We need to <em>get</em> the project <em>on track</em>.", kr: "ìš°ë¦¬ëŠ” í”„ë¡œì íŠ¸ë¥¼ ë³¸ê¶¤ë„ì— ì˜¬ë ¤ì•¼ í•œë‹¤." },
        'on-track-stay': { title: "stay on track", en: "Let's <em>stay on track</em> with our goals.", kr: "ìš°ë¦¬ ëª©í‘œì— ê³„ì† ì§‘ì¤‘í•©ì‹œë‹¤." },
        'on-track-put': { title: "put sth back on track", en: "He helped <em>put</em> the company <em>back on track</em>.", kr: "ê·¸ëŠ” íšŒì‚¬ë¥¼ ë‹¤ì‹œ ì •ìƒê¶¤ë„ì— ì˜¬ë ¤ë†“ëŠ” ë° ë„ì›€ì„ ì£¼ì—ˆë‹¤." },
        'in-trouble-be': { title: "be in trouble", en: "She knew she <em>was in trouble</em>.", kr: "ê·¸ë…€ëŠ” ìì‹ ì´ ê³¤ê²½ì— ì²˜í–ˆë‹¤ëŠ” ê²ƒì„ ì•Œì•˜ë‹¤." },
        'in-trouble-get': { title: "get into trouble", en: "Try not to <em>get into trouble</em>.", kr: "ê³¤ê²½ì— ë¹ ì§€ì§€ ì•Šë„ë¡ ë…¸ë ¥í•´ë¼." },
        'in-trouble-keep': { title: "keep sb out of trouble", en: "Her parents tried to <em>keep her out of trouble</em>.", kr: "ê·¸ë…€ì˜ ë¶€ëª¨ë‹˜ì€ ê·¸ë…€ê°€ ë§ì½ì„ í”¼ìš°ì§€ ì•Šë„ë¡ í•˜ë ¤ í–ˆë‹¤." },
        'under-pressure-be': { title: "be under pressure", en: "He <em>is under pressure</em> to finish by Friday.", kr: "ê·¸ëŠ” ê¸ˆìš”ì¼ê¹Œì§€ ëë‚´ì•¼ í•œë‹¤ëŠ” ì••ë°•ì„ ë°›ê³  ìˆë‹¤." },
        'under-pressure-work': { title: "work under pressure", en: "She <em>works well under pressure</em>.", kr: "ê·¸ë…€ëŠ” ì••ë°•ê° ì†ì—ì„œë„ ì¼ì„ ì˜í•œë‹¤." },
        'under-pressure-put': { title: "put sb under pressure", en: "Don't <em>put me under pressure</em>!", kr: "ë‚˜ì—ê²Œ ì••ë°• ì£¼ì§€ ë§ˆ!" }
    };
    function showExamplePopup(key) {
        const popupData = examplePopups[key];
        if (!popupData) return;
        const popup = document.getElementById('example-popup');
        const contentDiv = document.getElementById('example-popup-content');
        contentDiv.innerHTML = `<h3 class="text-xl font-semibold mb-3">${popupData.title}</h3>
                               <p class="example-en text-base mb-1">${popupData.en}</p>
                               <p class="example-kr text-base">${popupData.kr}</p>`;
        popup.style.display = 'block';
    }
    function closePopup(popupId) { document.getElementById(popupId).style.display = 'none'; }

    // Mermaid ì´ˆê¸°í™”
    mermaid.initialize({ startOnLoad: true, theme: 'neutral', securityLevel: 'loose', fontFamily: '"Noto Sans KR", sans-serif' });

    // --- D3.js ì‹œê°í™” í•¨ìˆ˜ë“¤ ---

    // ìŠ¬ë¼ì´ë“œ 3: 3ë‹¨ê³„ í”„ë ˆì„ì›Œí¬ íë¦„ë„ (ê°œì„ )
    function renderFrameworkFlowV2() {
        const vizContainer = d3.select("#d3-framework-flow-v2");
        vizContainer.select("svg").remove(); // ê¸°ì¡´ SVG ì œê±°
        const width = Math.min(vizContainer.node().getBoundingClientRect().width, 700);
        const height = 150; // ë†’ì´ ê°„ê²°í•˜ê²Œ ì¡°ì •

        const svg = vizContainer.append("svg").attr("width", width).attr("height", height);
        svg.append("defs").append("marker")
            .attr("id", "arrowhead-d3") // ê³ ìœ  ID ì‚¬ìš©
            .attr("viewBox", "-0 -5 10 10").attr("refX", 18).attr("refY", 0)
            .attr("orient", "auto").attr("markerWidth", 7).attr("markerHeight", 7)
            .append("svg:path").attr("d", "M 0,-5 L 10 ,0 L 0,5").attr("fill", "#3498DB");

        const nodeWidth = 180, nodeHeight = 80; // ë…¸ë“œ í¬ê¸° ì¡°ì •
        const nodesData = [
            { id: 1, text: "1. ë¬¼ë¦¬ì /ê³µê°„ì \nì˜ë¯¸ (ì›í˜•)", x: width * 0.15, y: height / 2, color: "#A5D8FF" }, // ì—°í•œ íŒŒë‘
            { id: 2, text: "2. ì€ìœ ì  ì—°ê²°\n(ì´ë¯¸ì§€ ìŠ¤í‚¤ë§ˆ)", x: width * 0.5, y: height / 2, color: "#FFD54F" }, // ì—°í•œ ì•°ë²„
            { id: 3, text: "3. ì¶”ìƒì  ì˜ë¯¸\n(ë¹„ìœ ì  í™•ì¥)", x: width * 0.85, y: height / 2, color: "#A0E6B4" }  // ì—°í•œ ì´ˆë¡
        ];
        const linksData = [ { source: 1, target: 2 }, { source: 2, target: 3 } ];

        const link = svg.append("g").selectAll("line")
            .data(linksData).join("line")
            .attr("x1", d => nodesData.find(n => n.id === d.source).x + nodeWidth/2 - 15)
            .attr("y1", d => nodesData.find(n => n.id === d.source).y)
            .attr("x2", d => nodesData.find(n => n.id === d.target).x - nodeWidth/2 + 15)
            .attr("y2", d => nodesData.find(n => n.id === d.target).y)
            .attr("class", "d3-arrow")
            .style("opacity", 0);

        const node = svg.append("g").selectAll("g")
            .data(nodesData).join("g")
            .attr("transform", d => `translate(${d.x},${d.y})`)
            .style("opacity", 0)
            .on("click", (event, d) => { // í´ë¦­ ì‹œ íŒì—… (ì˜ˆì‹œ)
                showExamplePopup('framework-step-' + d.id); // ê° ë‹¨ê³„ë³„ íŒì—… ë‚´ìš© í•„ìš”
            })
            .on("mouseover", function() { d3.select(this).select("rect").attr("filter", "url(#drop-shadow)"); })
            .on("mouseout", function() { d3.select(this).select("rect").attr("filter", null); });
        
        // ê·¸ë¦¼ì í•„í„° ì •ì˜
        const defs = svg.append("defs");
        const filter = defs.append("filter").attr("id", "drop-shadow").attr("height", "130%");
        filter.append("feGaussianBlur").attr("in", "SourceAlpha").attr("stdDeviation", 3).attr("result", "blur");
        filter.append("feOffset").attr("in", "blur").attr("dx", 2).attr("dy", 2).attr("result", "offsetBlur");
        const feMerge = filter.append("feMerge");
        feMerge.append("feMergeNode").attr("in", "offsetBlur");
        feMerge.append("feMergeNode").attr("in", "SourceGraphic");


        node.append("rect")
            .attr("x", -nodeWidth/2).attr("y", -nodeHeight/2)
            .attr("width", nodeWidth).attr("height", nodeHeight)
            .attr("rx", 10).attr("ry", 10) // ë” ë‘¥ê¸€ê²Œ
            .style("fill", d => d.color)
            .style("stroke", d => d3.color(d.color).darker(0.6))
            .style("stroke-width", 2.5)
            .style("cursor", "pointer");
        
        node.selectAll("text")
            .data(d => d.text.split("\n")).enter().append("text")
            .attr("dy", (d,i,arr) => (i - (arr.length-1)/2) * 1.4 + "em")
            .attr("text-anchor", "middle")
            .style("font-size", "13px").style("fill", "#2c3e50")
            .style("font-weight", "500").style("pointer-events", "none")
            .text(d => d);

        node.transition().duration(800).delay((d,i) => i * 700).style("opacity", 1);
        link.transition().duration(800).delay((d,i) => 500 + i * 700).style("opacity", 1);
    }
    // (íŒì—… ë‚´ìš© ì •ì˜ í•„ìš”)
    examplePopups['framework-step-1'] = { title: "1ë‹¨ê³„: ë¬¼ë¦¬ì /ê³µê°„ì  ì˜ë¯¸", en: "The most basic, concrete meaning related to physical space.", kr: "ê°€ì¥ ê¸°ë³¸ì ì¸, êµ¬ì²´ì ì¸ ê³µê°„ ê´€ë ¨ ì˜ë¯¸ì…ë‹ˆë‹¤." };
    examplePopups['framework-step-2'] = { title: "2ë‹¨ê³„: ì€ìœ ì  ì—°ê²°", en: "The physical meaning is metaphorically linked to an abstract concept.", kr: "ë¬¼ë¦¬ì  ì˜ë¯¸ê°€ ì¶”ìƒì  ê°œë…ê³¼ ì€ìœ ì ìœ¼ë¡œ ì—°ê²°ë©ë‹ˆë‹¤." };
    examplePopups['framework-step-3'] = { title: "3ë‹¨ê³„: ì¶”ìƒì  ì˜ë¯¸", en: "The meaning becomes fixed as an abstract or figurative expression.", kr: "ì¶”ìƒì ì´ê±°ë‚˜ ë¹„ìœ ì ì¸ í‘œí˜„ìœ¼ë¡œ ì˜ë¯¸ê°€ êµ³ì–´ì§‘ë‹ˆë‹¤." };


    // ìŠ¬ë¼ì´ë“œ 4, 5, 6ì˜ ì‹œë®¬ë ˆì´ì…˜ í•¨ìˆ˜ (initializeOnTrackSimulation ë“±)ëŠ”
    // ê° ë‹¨ê³„ ë²„íŠ¼ í´ë¦­ì— ë”°ë¼ D3.jsë¡œ ì‹œê°ì  ë³€í™”ë¥¼ ë³´ì—¬ì£¼ê³ ,
    // í•˜ë‹¨ì˜ ì„¤ëª… ì˜ì—­(#on-track-explanation ë“±)ì˜ ë‚´ìš©ì„ ì—…ë°ì´íŠ¸í•˜ë„ë¡ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.
    // ì´ ë¶€ë¶„ì€ ê° ì‹œë®¬ë ˆì´ì…˜ì˜ êµ¬ì²´ì ì¸ ë””ìì¸ì— ë”°ë¼ ì½”ë“œê°€ ë§¤ìš° ê¸¸ì–´ì§€ë¯€ë¡œ,
    // ì—¬ê¸°ì„œëŠ” ê° í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•Œ í•´ë‹¹ ì„¤ëª… ì˜ì—­ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ê¸°ë³¸ í‹€ë§Œ ì¡ê² ìŠµë‹ˆë‹¤.

    function setupStepwiseSimulation(baseId, stepsData) {
        const explanationDiv = document.getElementById(`${baseId}-explanation`);
        stepsData.forEach((step, index) => {
            const btn = document.getElementById(`${baseId}-step${index+1}-btn`);
            if (btn) {
                btn.onclick = () => {
                    explanationDiv.innerHTML = `<h4>${step.title}</h4><p>${step.description}</p><div class="example"><p class="example-en">${step.example_en || ""}</p><p class="example-kr">${step.example_kr || ""}</p></div>`;
                    // ì—¬ê¸°ì— ê° ë‹¨ê³„ë³„ D3.js ì‹œê°í™” ì—…ë°ì´íŠ¸ ë¡œì§ ì¶”ê°€
                    // ì˜ˆ: updateD3Visualization(baseId, index + 1);
                    console.log(`Simulating ${baseId} - Step ${index+1}`);
                    // ì„ì‹œë¡œ D3 ì˜ì—­ì— í…ìŠ¤íŠ¸ í‘œì‹œ
                    d3.select(`#d3-${baseId}-simulation-v2`).select("svg").remove();
                    const svg = d3.select(`#d3-${baseId}-simulation-v2`).append("svg").attr("width", "100%").attr("height", 200);
                    svg.append("text").attr("x", "50%").attr("y", "50%").attr("text-anchor", "middle").attr("dy", ".3em")
                       .text(`${step.title} ì‹œê°í™” ì˜ì—­`).style("font-size", "16px").style("fill", "#7f8c8d");
                };
            }
        });
        // ì´ˆê¸° ì„¤ëª… í‘œì‹œ
        if (stepsData.length > 0 && explanationDiv) {
             document.getElementById(`${baseId}-step1-btn`).click();
        }
    }
    
    function initializeOnTrackSimulation() {
        const steps = [
            { title: "1ë‹¨ê³„: ë¬¼ë¦¬ì  ì˜ë¯¸", description: "'ì„ ë¡œ(track) ìœ„(on)'ì— ê¸°ì°¨ê°€ ì •í™•íˆ ë†“ì—¬ ìˆëŠ” ë¬¼ë¦¬ì  ìƒíƒœë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ê¸°ì°¨ëŠ” ì •í•´ì§„ ê¸¸ì„ ë”°ë¼ ì›€ì§ì…ë‹ˆë‹¤.", example_en: "The train is <em>on the track</em>.", example_kr: "ê¸°ì°¨ê°€ ì„ ë¡œ ìœ„ì— ìˆë‹¤." },
            { title: "2ë‹¨ê³„: ì€ìœ ì  ì—°ê²°", description: "ë¬¼ë¦¬ì ì¸ 'ì„ ë¡œ'ëŠ” 'ê³„íšì´ë‚˜ ëª©í‘œë¡œ í–¥í•˜ëŠ” ì •í•´ì§„ ê²½ë¡œ'ë¡œ, 'ì„ ë¡œ ìœ„ì— ìˆìŒ'ì€ 'ê·¸ ê²½ë¡œë¥¼ ì˜ ë”°ë¥´ê³  ìˆìŒ'ìœ¼ë¡œ ì€ìœ ë©ë‹ˆë‹¤. (ê°œë… ì€ìœ : PURPOSES ARE PATHS)", example_en: "The journey of life is like being <em>on a track</em>.", example_kr: "ì¸ìƒ ì—¬ì •ì€ ë§ˆì¹˜ ì„ ë¡œ ìœ„ë¥¼ ë‹¬ë¦¬ëŠ” ê²ƒê³¼ ê°™ë‹¤." },
            { title: "3ë‹¨ê³„: ì¶”ìƒì  ì˜ë¯¸", description: "ê²°ê³¼ì ìœ¼ë¡œ 'ê³„íšì´ë‚˜ ì¼ì´ ì •í•´ì§„ ë°©í–¥ëŒ€ë¡œ ìˆœì¡°ë¡­ê²Œ ì§„í–‰ ì¤‘'ì´ë¼ëŠ” ì¶”ìƒì ì¸ ìƒíƒœë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.", example_en: "The project is <em>on track</em> for completion.", example_kr: "í”„ë¡œì íŠ¸ê°€ ì™„ë£Œë¥¼ í–¥í•´ ìˆœì¡°ë¡­ê²Œ ì§„í–‰ ì¤‘ì´ë‹¤." }
        ];
        setupStepwiseSimulation('on-track', steps);
    }

    function initializeInTroubleSimulation() {
        const steps = [
            { title: "1ë‹¨ê³„: ë¬¼ë¦¬ì  ì˜ë¯¸", description: "ì‚¬ëŒì´ë‚˜ ë¬¼ê±´ì´ 'ê³¤ë€í•œ ì¥ì†Œ, êµ¬ë©ì´, í•¨ì •(trouble as a container) ì•ˆ(in)'ì— ë¹ ì ¸ ìˆê±°ë‚˜ ê°‡í˜€ ìˆëŠ” ë¬¼ë¦¬ì  ìƒí™©ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.", example_en: "The explorer fell <em>in a hidden pit</em> (trouble).", example_kr: "íƒí—˜ê°€ê°€ ìˆ¨ê²¨ì§„ êµ¬ë©ì´(ê³¤ê²½)ì— ë¹ ì¡Œë‹¤." },
            { title: "2ë‹¨ê³„: ì€ìœ ì  ì—°ê²°", description: "ë¬¼ë¦¬ì ìœ¼ë¡œ 'ê°‡íŒ ê³µê°„'ì€ 'ë²—ì–´ë‚˜ê¸° ì–´ë µê³  ì œì•½ì´ ë§ì€ ë¬¸ì œ ìƒí™©'ìœ¼ë¡œ ì€ìœ ë©ë‹ˆë‹¤. (ê°œë… ì€ìœ : STATES ARE LOCATIONS, DIFFICULTIES ARE ENCLOSURES)", example_en: "Being stuck in a difficult situation feels like being <em>in a trap</em>.", example_kr: "ì–´ë ¤ìš´ ìƒí™©ì— ì²˜í•œ ê²ƒì€ í•¨ì •ì— ë¹ ì§„ ê²ƒ ê°™ì€ ëŠë‚Œì´ë‹¤." },
            { title: "3ë‹¨ê³„: ì¶”ìƒì  ì˜ë¯¸", description: "ê²°ê³¼ì ìœ¼ë¡œ 'ë¬¸ì œë‚˜ ê³¤ê²½ì— ì²˜í•œ ìƒíƒœ, ì–´ë ¤ì›€ì„ ê²ªê³  ìˆëŠ” ìƒíƒœ'ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.", example_en: "He is <em>in trouble</em> with the police.", example_kr: "ê·¸ëŠ” ê²½ì°°ì—ê²Œ ë¬¸ì œê°€ ìƒê²¼ë‹¤ (ê³¤ê²½ì— ì²˜í–ˆë‹¤)." }
        ];
        setupStepwiseSimulation('in-trouble', steps);
    }

    function initializeUnderPressureSimulation() {
         const steps = [
            { title: "1ë‹¨ê³„: ë¬¼ë¦¬ì  ì˜ë¯¸", description: "ë¬¼ê±´ì´ë‚˜ ì‚¬ëŒì´ 'ë¬´ê±°ìš´ ê²ƒ(pressure) ì•„ë˜(under)'ì— ë†“ì—¬ ë¬¼ë¦¬ì ì¸ ì••ë ¥ì„ ë°›ê³  ìˆëŠ” ìƒí™©ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.", example_en: "The book is <em>under a pile of</em> other books (pressure).", example_kr: "ê·¸ ì±…ì€ ë‹¤ë¥¸ ì±… ë”ë¯¸(ì••ë ¥) ì•„ë˜ì— ìˆë‹¤." },
            { title: "2ë‹¨ê³„: ì€ìœ ì  ì—°ê²°", description: "'ë¬¼ë¦¬ì ì¸ ì••ë ¥'ì€ 'ì‹¬ë¦¬ì ì¸ ë¶€ë‹´ê°, ìŠ¤íŠ¸ë ˆìŠ¤, ê°•ìš”' ë“±ìœ¼ë¡œ ì€ìœ ë©ë‹ˆë‹¤. 'ì•„ë˜ì— ìˆìŒ'ì€ ê·¸ëŸ¬í•œ ì˜í–¥ë ¥ í•˜ì— ë†“ì„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. (ê°œë… ì€ìœ : EMOTIONS ARE PHYSICAL FORCES, SUBJECTION IS DOWN)", example_en: "Heavy workload feels like a weight <em>pressing down on</em> you.", example_kr: "ê³¼ë„í•œ ì—…ë¬´ëŸ‰ì€ ë‹¹ì‹ ì„ ì§“ëˆ„ë¥´ëŠ” ë¬´ê²Œì²˜ëŸ¼ ëŠê»´ì§„ë‹¤." },
            { title: "3ë‹¨ê³„: ì¶”ìƒì  ì˜ë¯¸", description: "ê²°ê³¼ì ìœ¼ë¡œ 'ì‹¬ë¦¬ì  ì••ë°•ê°ì„ ëŠë¼ê±°ë‚˜ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ëŠ” ìƒíƒœ, ë˜ëŠ” ë¬´ì–¸ê°€ë¥¼ í•˜ë„ë¡ ê°•ìš”ë°›ëŠ” ìƒí™©'ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.", example_en: "She works well <em>under pressure</em>.", example_kr: "ê·¸ë…€ëŠ” ì••ë°•ê° ì†ì—ì„œë„ ì¼ì„ ì˜í•œë‹¤." }
        ];
        setupStepwiseSimulation('under-pressure', steps);
    }

    // ìŠ¬ë¼ì´ë“œ 7: ê°œë… ì€ìœ  ì´ë¡  (D3.js ê´€ê³„ë„)
    function renderConceptualMetaphors() {
        const vizContainer = d3.select("#d3-conceptual-metaphors");
        vizContainer.select("svg").remove();
        const width = Math.min(vizContainer.node().getBoundingClientRect().width, 800);
        const height = 400;
        const svg = vizContainer.append("svg").attr("width", width).attr("height", height);
        svg.append("defs").append("marker")
            .attr("id", "arrowhead-metaphor")
            .attr("viewBox", "-0 -5 10 10").attr("refX", 10).attr("refY", 0)
            .attr("orient", "auto").attr("markerWidth", 6).attr("markerHeight", 6)
            .append("svg:path").attr("d", "M 0,-5 L 10 ,0 L 0,5").attr("fill", "#2980b9");

        const metaphors = [
            { id: "SAL", text: "ìƒíƒœëŠ” ê³µê°„ì´ë‹¤\n(STATES ARE LOCATIONS)", examples: ["in trouble", "at peace"], x: width*0.2, y: height*0.25 },
            { id: "CAM", text: "ë³€í™”ëŠ” ì›€ì§ì„ì´ë‹¤\n(CHANGES ARE MOVEMENTS)", examples: ["get into", "fall out of"], x: width*0.5, y: height*0.25 },
            { id: "PAD", text: "ëª©ì ì€ ëª©ì ì§€/ê²½ë¡œì´ë‹¤\n(PURPOSES ARE DESTINATIONS/PATHS)", examples: ["on track", "off course"], x: width*0.8, y: height*0.25 },
            { id: "DIE", text: "ì–´ë ¤ì›€ì€ ì¥ì• ë¬¼/ê°‡íŒ ê³µê°„\n(DIFFICULTIES ARE IMPEDIMENTS)", examples: ["in a bind", "at a standstill"], x: width*0.2, y: height*0.7 },
            { id: "CIC", text: "í†µì œëŠ” ìœ„/ì•ˆ, í†µì œìƒì‹¤ì€ ì•„ë˜/ë°–\n(CONTROL IS UP/IN, LACK OF CONTROL IS OUT/DOWN)", examples: ["under control", "out of control"], x: width*0.5, y: height*0.7 },
            { id: "KLI", text: "ì§€ì‹ì€ ë¹›, ë¬´ì§€ëŠ” ì–´ë‘ \n(KNOWLEDGE IS LIGHT, IGNORANCE IS DARKNESS)", examples: ["in the dark", "shed light on"], x: width*0.8, y: height*0.7 }
        ];
        
        const sourceNode = { id: "Source", text: "ì¶œë°œ ì˜ì—­:\nêµ¬ì²´ì  ê²½í—˜\n(ì˜ˆ: ê³µê°„, ì›€ì§ì„)", x: width*0.5, y: height*0.08, color: "#FFB000" };
        const targetNode = { id: "Target", text: "ëª©í‘œ ì˜ì—­:\nì¶”ìƒì  ê°œë…\n(ì˜ˆ: ìƒíƒœ, ëª©ì )", x: width*0.5, y: height*0.92, color: "#0A4A8F", textColor: "white" };

        const allNodesData = [sourceNode, targetNode, ...metaphors];
        
        const linksData = metaphors.map(m => ({source: sourceNode.id, target: m.id})).concat(
                            metaphors.map(m => ({source: m.id, target: targetNode.id}))
                          );
        
        const nodeElements = svg.append("g").selectAll("g")
            .data(allNodesData).join("g")
            .attr("transform", d => `translate(${d.x},${d.y})`);

        nodeElements.append("rect")
            .attr("x", -85).attr("y", -25)
            .attr("width", 170).attr("height", 50)
            .attr("rx", 8).attr("ry", 8)
            .style("fill", d => d.color || "#E6F4FF")
            .style("stroke", d => d3.color(d.color || "#E6F4FF").darker(0.5))
            .style("stroke-width", 1.5);

        nodeElements.selectAll("text")
            .data(d => d.text.split("\n")).enter().append("text")
            .attr("dy", (d,i,arr) => (i - (arr.length-1)/2) * 1.2 + "em")
            .attr("text-anchor", "middle")
            .style("font-size", "11px")
            .style("fill", d => d.textColor || "#2c3e50")
            .style("font-weight", "500")
            .text(d => d);
        
        // íˆ´íŒ ìƒì„±
        const tooltip = d3.select("body").append("div")
            .attr("class", "tooltip");

        nodeElements.filter(d => metaphors.includes(d)) // ì€ìœ  ë…¸ë“œì—ë§Œ íˆ´íŒ ì ìš©
            .on("mouseover", (event, d) => {
                tooltip.transition().duration(200).style("opacity", .9);
                tooltip.html(`<strong>${d.text.split("\n")[1]}</strong><br/>ì˜ˆ: ${d.examples.join(", ")}`)
                    .style("left", (event.pageX + 15) + "px")
                    .style("top", (event.pageY - 28) + "px");
            })
            .on("mouseout", () => {
                tooltip.transition().duration(500).style("opacity", 0);
            });

        // ë§í¬ëŠ” ë…¸ë“œ ë’¤ì— ê·¸ë ¤ì§€ë„ë¡ ìˆœì„œ ì¡°ì • (ë˜ëŠ” ë³„ë„ g ì‚¬ìš©)
         svg.insert("g", "g") // Insert links before nodes
            .selectAll("line")
            .data(linksData).join("line")
            .attr("x1", d => allNodesData.find(n => n.id === d.source).x)
            .attr("y1", d => allNodesData.find(n => n.id === d.source).y + (d.source === sourceNode.id ? 25 : -25) ) // Adjust y for source/target
            .attr("x2", d => allNodesData.find(n => n.id === d.target).x)
            .attr("y2", d => allNodesData.find(n => n.id === d.target).y + (d.target === targetNode.id ? -25 : 25) ) // Adjust y for source/target
            .attr("stroke", "#7f8c8d")
            .attr("stroke-width", 1.5)
            .attr("marker-end", "url(#arrowhead-metaphor)");
    }

    // ìŠ¬ë¼ì´ë“œ 8: ì¹´ë“œ UI ì´ˆê¸°í™”
    function initializeCards() {
        const cardGrid = document.querySelector('.card-grid');
        cardGrid.innerHTML = ''; // Clear existing cards
        const cardData = [
            { expression: "out of control", spaceImg: "í†µì œ ë²”ìœ„ ë°–", abstract: "í†µì œ ë¶ˆëŠ¥ ìƒíƒœ", metaphor: "CONTROL IS CONTAINMENT" },
            { expression: "at a standstill", spaceImg: "ì •ì§€ëœ ì§€ì ", abstract: "ìƒí™© ë©ˆì¶¤, êµì°©", metaphor: "STATES ARE LOCATIONS, LACK OF PROGRESS IS LACK OF MOTION" },
            { expression: "on edge", spaceImg: "ê°€ì¥ìë¦¬ ìœ„", abstract: "ë¶ˆì•ˆ, ê¸´ì¥", metaphor: "EMOTIONAL STATES ARE PHYSICAL STATES (ìœ„íƒœë¡œìš´ ìœ„ì¹˜)" },
            { expression: "in the dark", spaceImg: "ì–´ë‘  ì†", abstract: "ì •ë³´ ëª¨ë¦„, ë¬´ì§€", metaphor: "KNOWLEDGE IS LIGHT, IGNORANCE IS DARKNESS" },
            { expression: "under arrest", spaceImg: "ê¶Œìœ„ ì•„ë˜", abstract: "ì²´í¬ ìƒíƒœ", metaphor: "SUBJECTION IS DOWN, AUTHORITY IS UP" },
            { expression: "off course", spaceImg: "ê²½ë¡œ ì´íƒˆ", abstract: "ê³„íš/ëª©í‘œ ì´íƒˆ", metaphor: "PURPOSES ARE PATHS/DESTINATIONS" }
        ];

        cardData.forEach(data => {
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <div class="card-front">
                    <h4 class="text-lg font-semibold">${data.expression.toUpperCase()}</h4>
                    <p class="text-sm text-gray-600 mt-2"><em>(í´ë¦­í•˜ì—¬ ìƒì„¸ ì •ë³´ í™•ì¸)</em></p>
                </div>
                <div class="card-back">
                    <h5><i class="fas fa-map-marker-alt mr-1 text-blue-500"></i>ê³µê°„ ì´ë¯¸ì§€:</h5>
                    <p>${data.spaceImg}</p>
                    <h5><i class="fas fa-brain mr-1 text-green-500"></i>ì¶”ìƒì  ì˜ë¯¸:</h5>
                    <p>${data.abstract}</p>
                    <h5><i class="fas fa-lightbulb mr-1 text-yellow-500"></i>ì£¼ìš” ê°œë… ì€ìœ :</h5>
                    <p>${data.metaphor.replace(/\n/g, '<br>')}</p>
                </div>
            `;
            card.onclick = () => card.classList.toggle('flipped');
            cardGrid.appendChild(card);
        });
    }

    // ìŠ¬ë¼ì´ë“œ 9: í€´ì¦ˆ
    function checkAnswer(button, isCorrect) {
        const feedbackDiv = document.getElementById('quiz-feedback-1');
        const optionButtons = button.parentElement.querySelectorAll('button');
        optionButtons.forEach(btn => btn.disabled = true); // í•œ ë²ˆë§Œ ì„ íƒ ê°€ëŠ¥

        if (isCorrect) {
            feedbackDiv.textContent = "ì •ë‹µì…ë‹ˆë‹¤! 'on edge'ëŠ” ìœ„íƒœë¡œìš´ ê°€ì¥ìë¦¬ì— ìˆëŠ” ë¬¼ë¦¬ì  ìƒíƒœì—ì„œ 'ë¶ˆì•ˆí•˜ê³  ê¸´ì¥ëœ' ì‹¬ë¦¬ ìƒíƒœë¥¼ ì€ìœ í•©ë‹ˆë‹¤.";
            feedbackDiv.className = 'quiz-feedback correct';
            button.style.backgroundColor = '#10B981'; // Green for correct
            button.style.color = 'white';
        } else {
            feedbackDiv.textContent = "ì•„ì‰½ë„¤ìš”. 'on edge'ëŠ” ë¬¼ë¦¬ì ìœ¼ë¡œ ê°€ì¥ìë¦¬ì— ìˆëŠ” ìœ„íƒœë¡œìš´ ìƒí™©ì„ ì‹¬ë¦¬ì  ë¶ˆì•ˆê°ì— ë¹„ìœ í•œ ê²ƒì…ë‹ˆë‹¤. (ì •ë‹µ: B)";
            feedbackDiv.className = 'quiz-feedback incorrect';
            button.style.backgroundColor = '#EF4444'; // Red for incorrect
            button.style.color = 'white';
            // ì •ë‹µ ë²„íŠ¼ ê°•ì¡° (ì˜ˆì‹œ)
            optionButtons.forEach(btn => {
                if (btn.textContent.includes("STATES ARE LOCATIONS")) { // ì •ë‹µ í‚¤ì›Œë“œ í™•ì¸
                     btn.style.backgroundColor = '#10B981'; btn.style.color = 'white';
                }
            });
        }
        feedbackDiv.style.display = 'block';
    }
    
    // ìŠ¬ë¼ì´ë“œ 10: ìš”ì•½ ë§ˆì¸ë“œë§µ
    function renderSummaryMindmap() {
        const vizContainer = d3.select("#d3-summary-mindmap");
        vizContainer.select("svg").remove();
        const width = Math.min(vizContainer.node().getBoundingClientRect().width, 600);
        const height = 300;
        const svg = vizContainer.append("svg").attr("width", width).attr("height", height);

        const root = { name: "ì „ì¹˜ì‚¬ í•™ìŠµ í•µì‹¬", children: [
            { name: "3ë‹¨ê³„ í”„ë ˆì„ì›Œí¬", children: [{name: "ë¬¼ë¦¬ì "}, {name: "ì€ìœ ì "}, {name: "ì¶”ìƒì "}] },
            { name: "ê°œë… ì€ìœ  ì´ë¡ ", children: [{name: "STATES ARE LOCATIONS"}, {name: "PURPOSES ARE PATHS"}, {name: "..."}] },
            { name: "í•™ìŠµ ì „ëµ", children: [{name: "ì›í˜• ì˜ë¯¸"}, {name: "ë¬¸ë§¥"}, {name: "ëŠ¥ë™ì  ì‚¬ìš©"}] }
        ]};

        const treeLayout = d3.tree().size([height - 40, width - 160]); // Adjusted for padding
        const hierarchyData = d3.hierarchy(root);
        treeLayout(hierarchyData);

        const g = svg.append("g").attr("transform", "translate(80,20)"); // Adjust translation

        g.selectAll(".link")
            .data(hierarchyData.links())
            .join("path")
            .attr("class", "link")
            .attr("d", d3.linkHorizontal().x(d => d.y).y(d => d.x))
            .attr("fill", "none")
            .attr("stroke", "#FFB000") // Amber Yellow
            .attr("stroke-width", 1.5);

        const node = g.selectAll(".node")
            .data(hierarchyData.descendants())
            .join("g")
            .attr("class", d => `node${d.children ? " node--internal" : " node--leaf"}`)
            .attr("transform", d => `translate(${d.y},${d.x})`);

        node.append("circle")
            .attr("r", d => d.depth === 0 ? 12 : 8)
            .attr("fill", d => d.children ? "#0A4A8F" : "#3498DB") // Deep blue for internal, bright blue for leaf
            .attr("stroke", "#FFB000")
            .attr("stroke-width", 1.5);

        node.append("text")
            .attr("dy", "0.31em")
            .attr("x", d => d.children ? -12 : 12)
            .attr("text-anchor", d => d.children ? "end" : "start")
            .text(d => d.data.name)
            .style("font-size", d => d.depth === 0 ? "14px" : "12px")
            .style("fill", "#2c3e50")
            .style("font-weight", d => d.depth === 0 ? "bold" : "normal");
    }


    // ì´ˆê¸° ìŠ¬ë¼ì´ë“œ í‘œì‹œ
    document.addEventListener('DOMContentLoaded', () => {
        showSlide(0);
        // Font Awesome ì•„ì´ì½˜ì´ ì œëŒ€ë¡œ ë¡œë“œë˜ë„ë¡ ì•½ê°„ì˜ ì§€ì—° í›„ Mermaid ë Œë”ë§
        setTimeout(() => {
            mermaid.run({
                nodes: document.querySelectorAll('.mermaid'),
            });
        }, 100);
    });

</script>
</body>
</html>